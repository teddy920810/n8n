services:
  - type: web
    name: n8n
    env: node
    buildCommand: |
      corepack enable
      corepack prepare pnpm@8.6.12 --activate
      pnpm install --frozen-lockfile
      pnpm build
    startCommand: pnpm start
    plan: starter
    branch: main
    envVars:
      - key: NODE_VERSION
        value: 18
      - key: DB_TYPE
        value: postgresdb
      - key: DB_POSTGRESDB_CONNECTION_URL
        fromDatabase:
          name: n8n-db
          property: connectionString
      - key: N8N_BASIC_AUTH_ACTIVE
        value: true
      - key: N8N_BASIC_AUTH_USER
        value: admin
      - key: N8N_BASIC_AUTH_PASSWORD
        sync: false
      - key: N8N_ENCRYPTION_KEY
        sync: false
      - key: WEBHOOK_URL
        value: https://your-service-name.onrender.com
